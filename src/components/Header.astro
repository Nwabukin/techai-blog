---
import Navigation from './Navigation.astro';
import ThemeSwitcher from './ThemeSwitcher.astro';
import SearchDialog from './SearchDialog.astro';
import { icons } from '../utils/icons';

const searchIcon = icons.search;
---

<header
  class="sticky top-0 z-50 w-full bg-white/95 dark:bg-secondary-900/95 backdrop-blur-md border-b border-secondary-200 dark:border-secondary-800"
>
  <div class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a
        href="/"
        class="text-2xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent hover:opacity-90 transition-opacity"
      >
        Tech AI Blog
      </a>

      <!-- Center Navigation -->
      <Navigation />

      <!-- Right Actions -->
      <div class="flex items-center gap-2">
        <button
          id="open-search"
          class="p-2 text-secondary-600 hover:text-primary-600 dark:text-secondary-400 dark:hover:text-primary-400 transition-colors"
          aria-label="Search"
        >
          <span set:html={searchIcon} />
        </button>
        <div class="w-px h-6 bg-secondary-200 dark:bg-secondary-700 mx-2"></div>
        <ThemeSwitcher />
      </div>
    </div>
  </div>
</header>

<SearchDialog />

<script>
  const openSearchButton = document.getElementById('open-search');
  const searchDialog = document.getElementById('search-dialog');
  const searchInput = document.getElementById('search-input');

  openSearchButton?.addEventListener('click', () => {
    searchDialog?.classList.remove('hidden');
    searchDialog?.classList.add('block');
    searchInput?.focus();
  });
</script>
