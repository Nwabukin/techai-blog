---
interface Props {
  title: string;
  description: string;
  pubDate: Date;
  author: string;
  slug: string;
  image?: string;
  readingTime?: string;
  category?: string;
}

const {
  title,
  description,
  pubDate,
  author,
  slug,
  image,
  readingTime = '5 min read',
  category = 'Technology',
} = Astro.props;
const formattedDate = pubDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

// Category icon
const categoryIcon = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
</svg>`;

// Clock icon for reading time
const clockIcon = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
</svg>`;
---

<article
  class="group bg-white dark:bg-secondary-900 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 border border-secondary-100 dark:border-secondary-800 overflow-hidden"
>
  {
    image && (
      <a href={`/blog/${slug}`} class="block relative overflow-hidden aspect-video">
        <img
          src={image}
          alt={title}
          class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-300"
        />
        <div class="absolute top-4 left-4 flex items-center gap-2 text-xs">
          <span class="bg-white/90 dark:bg-secondary-900/90 backdrop-blur-sm text-primary-600 dark:text-primary-400 px-3 py-1 rounded-full flex items-center gap-1.5">
            <span set:html={categoryIcon} />
            {category}
          </span>
        </div>
      </a>
    )
  }

  <div class="p-6">
    <h2
      class="text-xl font-bold text-secondary-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors"
    >
      <a href={`/blog/${slug}`} class="block">
        {title}
      </a>
    </h2>

    <p class="mt-3 text-secondary-600 dark:text-secondary-400 line-clamp-2">
      {description}
    </p>

    <div
      class="mt-6 pt-4 border-t border-secondary-100 dark:border-secondary-800 flex items-center justify-between"
    >
      <div class="flex items-center gap-3">
        <div
          class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400 flex items-center justify-center font-medium"
        >
          {author.charAt(0)}
        </div>
        <div class="text-sm">
          <p class="text-secondary-900 dark:text-white font-medium">{author}</p>
          <time datetime={pubDate.toISOString()} class="text-secondary-500 dark:text-secondary-400">
            {formattedDate}
          </time>
        </div>
      </div>

      <span class="flex items-center gap-1.5 text-xs text-secondary-500 dark:text-secondary-400">
        <span set:html={clockIcon} />
        {readingTime}
      </span>
    </div>
  </div>
</article>
